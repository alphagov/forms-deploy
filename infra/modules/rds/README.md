### Description

This module deploys an RDS cluster in Serverless v2 configuration using a PostgreSQL 16.x engine.

### How to prepare the databases

#### Forms-admin

forms-admin has its own database and is setup in an RDS cluster. The following is a one-off operation to be done after the initial creation of the cluster. Any subsequent restoration should be done via backups.

- Create a password for the `root` user and store it in SSM Parameter Store as a secure string in the `${app-identifier}/database/root-password` parameter that was created as part of the rds module.
- Using the console in AWS, add the same password created in the previous step as the `master password` of the aurora cluster you have just created.
- Create passwords for the `forms-admin` user and store in SSM Parameter Store as secure strings in the `/${app-name}-${environment}/database/password` paramaters that were created as part of the rds module. Database URLs will be automatically generated by Terraform.
- Terraform automatically creates Data API secrets in Secrets Manager (format: `data-api/${environment}/${app-name}/rds-credentials`) for CLI access.
- Use the AWS Data API console to connect to the `postgres` database using username `root` and the root password created above.
- copy the `forms-admin-prepare.sql` script into the Data API console and replace the place-holders with the passwords above.
- Run the script and check each statement is successful.

The app is currently configured to run its database migrations when it starts. These migrations will create the necessary tables and indexes and no further manual setup should be required.

#### Forms-runner

forms-runner has two databases, which are setup in a separate RDS cluster forms-admin. There is an app database and a database used by Solid Queue. The steps for their initial creation are the same as above, but using `forms-runner-prepare.sql`. Database URLs and Data API secrets are automatically created by Terraform. Any subsequent restoration should be done via backups.

forms-runner is currently configured to run its database migrations when it starts. These migrations will create the necessary tables and indexes and no further manual setup should be required.
